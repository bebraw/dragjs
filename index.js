function d({element:n,handle:e,xPosition:t},r){if(!n){console.warn("drag is missing elem!");return}C(n,"touchstart","touchmove","touchend",r,e,t),C(n,"mousedown","mousemove","mouseup",r,e,t)}function h(n){let e=l(n.class||"",n.parent),t=l("pointer",e);return l("shape shape1",t),l("shape shape2",t),l("bg bg1",e),l("bg bg2",e),d({element:e},x(n.cbs,t)),{background:e,pointer:t}}function E(n){let e=l(n.class,n.parent),t=l("pointer",e);return l("shape",t),l("bg",e),d({element:e},x(n.cbs,t)),{background:e,pointer:t}}function x(n,e){let t={};return Object.entries(n).forEach(([r,i])=>{t[r]=o=>{i({...o,pointer:e})}}),t}function l(n,e){return H("div",n,e)}function H(n,e,t){let r=document.createElement(n);return e&&(r.className=e),t.appendChild(r),r}function C(n,e,t,r,i,o,s){i=k(i,s);let c=i.begin,u=i.change,L=i.end;m(o||n,e,b=>{let y=M=>f(u,n,M);function p(){v(document,t,y),v(document,r,p),f(L,n,b)}m(document,t,y),m(document,r,p),f(c,n,b)})}function m(n,e,t){let r=!1;try{let i=Object.defineProperty({},"passive",{get:function(){r=!0}});globalThis.addEventListener("testPassive",null,i),globalThis.removeEventListener("testPassive",null,i)}catch(i){console.error(i)}n.addEventListener(e,t,r?{passive:!1}:!1)}function v(n,e,t){n.removeEventListener(e,t,!1)}function k(n,e="left"){let t,r,i={begin:o=>{let s=document.body.clientWidth;t={x:e==="left"?o.elem.offsetLeft:s-o.elem.offsetLeft-o.elem.clientWidth,y:o.elem.offsetTop},r=e==="left"?o.cursor:{x:s-o.cursor.x,y:o.cursor.y}},change:o=>{if(typeof t.x!="number"||typeof o.cursor.x!="number"||typeof r.x!="number")return;let s=document.body.clientWidth;T(o.elem,e,e==="left"?t.x+o.cursor.x-r.x+"px":t.x+(s-o.cursor.x)-r.x+"px"),!(typeof t.y!="number"||typeof o.cursor.y!="number"||typeof r.y!="number")&&T(o.elem,"top",t.y+o.cursor.y-r.y+"px")},end:w};return n?{begin:n.begin?o=>{if(n.begin&&n.begin(o))return i.begin(o)}:i.begin,change:n.change?o=>{let s=n.change&&n.change(o);if(console.log("at change",s),s)return i.change(o)}:i.change,end:n.end||i.end}:i}function T(n,e,t){n.style[e]=t}function w(){}function f(n,e,t){t.preventDefault();let r=P(e),i=e.clientWidth,o=e.clientHeight,s={x:W(e,t),y:B(e,t)};if(typeof s.x!="number"||typeof s.y!="number")return;let c=(s.x-r.x)/i,u=(s.y-r.y)/o;n({x:isNaN(c)?0:c,y:isNaN(u)?0:u,cursor:s,elem:e,e:t})}function P(n){let e=n.getBoundingClientRect();return{x:e.left,y:e.top}}function W(n,e){return e instanceof TouchEvent?e.touches.item(0)?.clientX:e.clientX}function B(n,e){return e instanceof TouchEvent?e.touches.item(0)?.clientY:e.clientY}window.onload=function(){let n=document.getElementById("draggable");n&&d({element:n},{change:({x:r,y:i})=>(a("draggable x:"+r.toFixed(2)+", y: "+i.toFixed(2)),!0)});let e=document.getElementById("onedContainer");e&&E({parent:e,class:"oned",cbs:{begin:()=>{a("2dslider: begin")},change:({x:r,pointer:i})=>{let o=g(r*100,0,100).toFixed(2)+"%";a("2dslider: "+o),i&&(i.style.left=o)},end:()=>{a("2dslider: end")}}});let t=document.getElementById("twodContainer");t&&h({parent:t,class:"twod",cbs:{change:({x:r,y:i,pointer:o})=>{let s=g(r*100,0,100).toFixed(2)+"%",c=g(i*100,0,100).toFixed(2)+"%";a("x: "+s+", y: "+c),o&&(o.style.left=s,o.style.top=c)}}})};function a(n){let e=document.getElementById("value");console.log(n),e&&(e.innerHTML=n)}function g(n,e,t){return Math.min(Math.max(n,e),t)}
