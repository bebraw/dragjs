function u({element:n,handle:e,xPosition:t},r){if(!n){console.warn("drag is missing elem!");return}T(n,"touchstart","touchmove","touchend",r,e,t),T(n,"mousedown","mousemove","mouseup",r,e,t)}function v(n){let e=l(n.class||"",n.parent),t=l("pointer",e);return l("shape shape1",t),l("shape shape2",t),l("bg bg1",e),l("bg bg2",e),u({element:e},C(n.cbs,t)),{background:e,pointer:t}}function x(n){let e=l(n.class,n.parent),t=l("pointer",e);return l("shape",t),l("bg",e),u({element:e},C(n.cbs,t)),{background:e,pointer:t}}function C(n,e){let t={};return Object.entries(n).forEach(([r,o])=>{t[r]=s=>{o({...s,pointer:e})}}),t}function l(n,e){return w("div",n,e)}function w(n,e,t){let r=document.createElement(n);return e&&(r.className=e),t.appendChild(r),r}function T(n,e,t,r,o,s,i){o=P(o,i);let c=o.begin,a=o.change,H=o.end;b(s||n,e,y=>{let h=k=>g(a,n,k);function E(){L(document,t,h),L(document,r,E),g(H,n,y)}b(document,t,h),b(document,r,E),g(c,n,y)})}function b(n,e,t){let r=!1;try{let o=Object.defineProperty({},"passive",{get:function(){r=!0}});globalThis.addEventListener("testPassive",null,o),globalThis.removeEventListener("testPassive",null,o)}catch(o){console.error(o)}n.addEventListener(e,t,r?{passive:!1}:!1)}function L(n,e,t){n.removeEventListener(e,t,!1)}function P(n,e="left"){if(n)return{begin:n.begin||d,change:n.change||d,end:n.end||d};let t,r;return{begin:function(o){let s=document.body.clientWidth;t={x:e==="left"?o.elem.offsetLeft:s-o.elem.offsetLeft-o.elem.clientWidth,y:o.elem.offsetTop},r=e==="left"?o.cursor:{x:s-o.cursor.x,y:o.cursor.y}},change:function(o){if(typeof t.x!="number"||typeof o.cursor.x!="number"||typeof r.x!="number")return;let s=document.body.clientWidth;M(o.elem,e,e==="left"?t.x+o.cursor.x-r.x+"px":t.x+(s-o.cursor.x)-r.x+"px"),!(typeof t.y!="number"||typeof o.cursor.y!="number"||typeof r.y!="number")&&M(o.elem,"top",t.y+o.cursor.y-r.y+"px")},end:d}}function M(n,e,t){n.style[e]=t}function d(){}function g(n,e,t){t.preventDefault();let r=W(e),o=e.clientWidth,s=e.clientHeight,i={x:N(e,t),y:X(e,t)};if(typeof i.x!="number"||typeof i.y!="number")return;let c=(i.x-r.x)/o,a=(i.y-r.y)/s;n({x:isNaN(c)?0:c,y:isNaN(a)?0:a,cursor:i,elem:e,e:t})}function W(n){let e=n.getBoundingClientRect();return{x:e.left,y:e.top}}function N(n,e){return e instanceof TouchEvent?e.touches.item(0)?.clientX:e.clientX}function X(n,e){return e instanceof TouchEvent?e.touches.item(0)?.clientY:e.clientY}window.onload=function(){let n=m("draggable");n&&u({element:n});let e=m("twodContainer");e&&v({parent:e,class:"twod",cbs:{change:({x:r,y:o,pointer:s})=>{let i=p(r*100,0,100).toFixed(2)+"%",c=p(o*100,0,100).toFixed(2)+"%";f("x: "+i+", y: "+c),s&&(s.style.left=i,s.style.top=c)}}});let t=m("onedContainer");t&&x({parent:t,class:"oned",cbs:{begin:()=>{f("2dslider: begin")},change:({x:r,pointer:o})=>{let s=p(r*100,0,100).toFixed(2)+"%";f("2dslider: "+s),o&&(o.style.left=s)},end:()=>{f("2dslider: end")}}})};function f(n){let e=m("value");console.log(n),e&&(e.innerHTML=n)}function m(n){return document.getElementById(n)}function p(n,e,t){return Math.min(Math.max(n,e),t)}
