function u({element:n,handle:e,xPosition:t},r){if(!n){console.warn("drag is missing elem!");return}C(n,"touchstart","touchmove","touchend",r,e,t),C(n,"mousedown","mousemove","mouseup",r,e,t)}function h(n){let e=l(n.class||"",n.parent),t=l("pointer",e);return l("shape shape1",t),l("shape shape2",t),l("bg bg1",e),l("bg bg2",e),u({element:e},x(n.cbs,t)),{background:e,pointer:t}}function v(n){let e=l(n.class,n.parent),t=l("pointer",e);return l("shape",t),l("bg",e),u({element:e},x(n.cbs,t)),{background:e,pointer:t}}function x(n,e){let t={};return Object.entries(n).forEach(([r,o])=>{t[r]=s=>{o({...s,pointer:e})}}),t}function l(n,e){return k("div",n,e)}function k(n,e,t){let r=document.createElement(n);return e&&(r.className=e),t.appendChild(r),r}function C(n,e,t,r,o,s,i){o=w(o,i);let c=o.begin,a=o.change,M=o.end;f(s||n,e,y=>{let p=H=>b(a,n,H);function E(){T(document,t,p),T(document,r,E),b(M,n,y)}f(document,t,p),f(document,r,E),b(c,n,y)})}function f(n,e,t){let r=!1;try{let o=Object.defineProperty({},"passive",{get:function(){r=!0}});globalThis.addEventListener("testPassive",null,o),globalThis.removeEventListener("testPassive",null,o)}catch(o){console.error(o)}n.addEventListener(e,t,r?{passive:!1}:!1)}function T(n,e,t){n.removeEventListener(e,t,!1)}function w(n,e="left"){if(n)return{begin:n.begin||d,change:n.change||d,end:n.end||d};let t,r;return{begin:function(o){let s=document.body.clientWidth;t={x:e==="left"?o.elem.offsetLeft:s-o.elem.offsetLeft-o.elem.clientWidth,y:o.elem.offsetTop},r=e==="left"?o.cursor:{x:s-o.cursor.x,y:o.cursor.y}},change:function(o){if(typeof t.x!="number"||typeof o.cursor.x!="number"||typeof r.x!="number")return;let s=document.body.clientWidth;L(o.elem,e,e==="left"?t.x+o.cursor.x-r.x+"px":t.x+(s-o.cursor.x)-r.x+"px"),!(typeof t.y!="number"||typeof o.cursor.y!="number"||typeof r.y!="number")&&L(o.elem,"top",t.y+o.cursor.y-r.y+"px")},end:d}}function L(n,e,t){n.style[e]=t}function d(){}function b(n,e,t){t.preventDefault();let r=P(e),o=e.clientWidth,s=e.clientHeight,i={x:W(e,t),y:B(e,t)};if(typeof i.x!="number"||typeof i.y!="number")return;let c=(i.x-r.x)/o,a=(i.y-r.y)/s;n({x:isNaN(c)?0:c,y:isNaN(a)?0:a,cursor:i,elem:e,e:t})}function P(n){let e=n.getBoundingClientRect();return{x:e.left,y:e.top}}function W(n,e){return e instanceof TouchEvent?e.touches.item(0)?.clientX:e.clientX}function B(n,e){return e instanceof TouchEvent?e.touches.item(0)?.clientY:e.clientY}window.onload=function(){let n=document.getElementById("draggable");n&&u({element:n});let e=document.getElementById("onedContainer");e&&v({parent:e,class:"oned",cbs:{begin:()=>{m("2dslider: begin")},change:({x:r,pointer:o})=>{let s=g(r*100,0,100).toFixed(2)+"%";m("2dslider: "+s),o&&(o.style.left=s)},end:()=>{m("2dslider: end")}}});let t=document.getElementById("twodContainer");t&&h({parent:t,class:"twod",cbs:{change:({x:r,y:o,pointer:s})=>{let i=g(r*100,0,100).toFixed(2)+"%",c=g(o*100,0,100).toFixed(2)+"%";m("x: "+i+", y: "+c),s&&(s.style.left=i,s.style.top=c)}}})};function m(n){let e=document.getElementById("value");console.log(n),e&&(e.innerHTML=n)}function g(n,e,t){return Math.min(Math.max(n,e),t)}
