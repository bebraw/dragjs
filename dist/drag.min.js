/*! drag.js - v0.3.5 - 2012-07-11
* http://bebraw.github.com/drag.js/
* Copyright (c) 2012 Juho Vepsalainen; Licensed MIT */
(function(a,b){typeof define=="function"&&define.amd?define(b):a.drag=b()})(this,function(){function a(a,b){if(!a){console.warn("drag is missing elem!");return}g()?h(a,b,"touchstart","touchmove","touchend"):h(a,b,"mousedown","mousemove","mouseup")}function b(b){var c=e(b["class"]||"",b.parent),f=e("pointer",c);return e("shape shape1",f),e("shape shape2",f),e("bg bg1",c),e("bg bg2",c),a(c,d(b.cbs,f)),{background:c,pointer:f}}function c(b){var c=e(b["class"],b.parent),f=e("pointer",c);return e("shape",f),e("bg",c),a(c,d(b.cbs,f)),{background:c,pointer:f}}function d(a,b){function e(a){return function(c){c.pointer=b,a(c)}}var c={};for(var d in a)c[d]=e(a[d]);return c}function e(a,b){return f("div",a,b)}function f(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c.appendChild(d),d}function g(){return typeof window.ontouchstart!="undefined"}function h(a,b,c,d,e){var f=!1;b=k(b);var g=b.begin,h=b.change,l=b.end;i(a,c,function(b){function k(){f=!1,j(document,d,c),j(document,e,k),n(l,a,b)}f=!0;var c=o(n,h,a);i(document,d,c),i(document,e,k),n(g,a,b)}),i(a,e,function(b){f=!1,n(l,a,b)})}function i(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function j(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function k(a){if(!a){var b,c;return{begin:function(a){b={x:a.elem.offsetLeft,y:a.elem.offsetTop},c=a.cursor},change:function(a){l(a.elem,"left",b.x+a.cursor.x-c.x+"px"),l(a.elem,"top",b.y+a.cursor.y-c.y+"px")},end:m}}return{begin:a.begin||m,change:a.change||m,end:a.end||m}}function l(a,b,c){a.style[b]=c}function m(){}function n(a,b,c){c.preventDefault();var d=p(b),e=b.clientWidth,f=b.clientHeight,g={x:q(b,c),y:r(b,c)},h=(g.x-d.x)/e,i=(g.y-d.y)/f;a({x:isNaN(h)?0:h,y:isNaN(i)?0:i,cursor:g,elem:b,e:c})}function o(a){var b=Array.prototype.slice,c=b.apply(arguments,[1]);return function(){return a.apply(null,c.concat(b.apply(arguments)))}}function p(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}}function q(a,b){if(t(a)){var c=parseInt(document.defaultView.getComputedStyle(document.body,"").marginLeft,10)-s(a,"scrollLeft")+window.pageXOffset+a.style.marginLeft;return b.clientX-c}if(b.pageX)return b.pageX;if(b.clientX)return b.clientX+document.body.scrollLeft}function r(a,b){if(t(a)){var c=parseInt(document.defaultView.getComputedStyle(document.body,"").marginTop,10)-s(a,"scrollTop")+window.pageYOffset+a.style.marginTop;return b.clientY-c}if(b.pageY)return b.pageY;if(b.clientY)return b.clientY+document.body.scrollTop}function s(a,b){var c=0;while(a.nodeName!="HTML")c+=a[b],a=a.parentNode;return c}function t(a){while(a.nodeName!="HTML"&&u(a,"position")!="fixed")a=a.parentNode;return a.nodeName=="HTML"?!1:!0}function u(a,b){var c;return window.getComputedStyle?c=window.getComputedStyle(a,null):c=a.currentStyle,c[b]}return a.xyslider=b,a.slider=c,a});