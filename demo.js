function u({element:n,handle:e,xPosition:t},r){if(!n){console.warn("drag is missing elem!");return}p(n,"touchstart","touchmove","touchend",r,e,t),p(n,"mousedown","mousemove","mouseup",r,e,t)}function x(n){let e=c(n.class||"",n.parent),t=c("pointer",e);return c("shape shape1",t),c("shape shape2",t),c("bg bg1",e),c("bg bg2",e),u({element:e},M(n.cbs,t)),{background:e,pointer:t}}function T(n){let e=c(n.class,n.parent),t=c("pointer",e);return c("shape",t),c("bg",e),u({element:e},M(n.cbs,t)),{background:e,pointer:t}}function M(n,e){let t={};return Object.entries(n).forEach(([r,s])=>{t[r]=o=>{s({...o,pointer:e})}}),t}function c(n,e){return H("div",n,e)}function H(n,e,t){let r=document.createElement(n);return e&&(r.className=e),t.appendChild(r),r}function p(n,e,t,r,s,o,i){s=w(s,i);let l=s.begin,a=s.change,m=s.end;g(o||n,e,h=>{let y=L=>f(a,n,L);function E(){v(document,t,y),v(document,r,E),f(m,n,h)}g(document,t,y),g(document,r,E),f(l,n,h)})}function g(n,e,t){let r=!1;try{let s=Object.defineProperty({},"passive",{get:function(){r=!0}});globalThis.addEventListener("testPassive",null,s),globalThis.removeEventListener("testPassive",null,s)}catch(s){console.error(s)}n.addEventListener(e,t,r?{passive:!1}:!1)}function v(n,e,t){n.removeEventListener(e,t,!1)}function w(n,e="left"){let t,r,s={begin:o=>{let i=document.body.clientWidth;t={x:e==="left"?o.elem.offsetLeft:i-o.elem.offsetLeft-o.elem.clientWidth,y:o.elem.offsetTop},r=e==="left"?o.cursor:{x:i-o.cursor.x,y:o.cursor.y}},change:o=>{if(typeof t.x!="number"||typeof o.cursor.x!="number"||typeof r.x!="number")return;let i=document.body.clientWidth;C(o.elem,e,e==="left"?t.x+o.cursor.x-r.x+"px":t.x+(i-o.cursor.x)-r.x+"px"),!(typeof t.y!="number"||typeof o.cursor.y!="number"||typeof r.y!="number")&&C(o.elem,"top",t.y+o.cursor.y-r.y+"px")},end:()=>{}};return n?{begin:n.begin?o=>{if(n.begin&&n.begin(o))return s.begin(o)}:s.begin,change:n.change?o=>{if(n.change&&n.change(o))return s.change(o)}:s.change,end:n.end||s.end}:s}function C(n,e,t){n.style[e]=t}function f(n,e,t){t.preventDefault();let r=e.getBoundingClientRect(),s=e.clientWidth,o=e.clientHeight,i={x:k(e,t),y:P(e,t)};if(typeof i.x!="number"||typeof i.y!="number")return;let l=(i.x-r.left)/s,a=(i.y-r.top)/o;n({x:isNaN(l)?0:l,y:isNaN(a)?0:a,cursor:i,elem:e,e:t})}function k(n,e){return window.TouchEvent&&e instanceof window.TouchEvent?e.touches.item(0)?.clientX:e.clientX}function P(n,e){return window.TouchEvent&&e instanceof window.TouchEvent?e.touches.item(0)?.clientY:e.clientY}window.onload=function(){let n=document.getElementById("draggable");n&&u({element:n},{change:({x:o,y:i})=>(d("draggable x:"+o.toFixed(2)+", y: "+i.toFixed(2)),!0)});let e=document.getElementById("draggabletwo"),t=e?.children[0];e&&t&&u({element:e,handle:t});let r=document.getElementById("onedContainer");r&&T({parent:r,class:"oned",cbs:{begin:()=>{d("2dslider: begin")},change:({x:o,pointer:i})=>{let l=b(o*100,0,100).toFixed(2)+"%";d("2dslider: "+l),i&&(i.style.left=l)},end:()=>{d("2dslider: end")}}});let s=document.getElementById("twodContainer");s&&x({parent:s,class:"twod",cbs:{change:({x:o,y:i,pointer:l})=>{let a=b(o*100,0,100).toFixed(2)+"%",m=b(i*100,0,100).toFixed(2)+"%";d("x: "+a+", y: "+m),l&&(l.style.left=a,l.style.top=m)}}})};function d(n){let e=document.getElementById("value");console.log(n),e&&(e.innerHTML=n)}function b(n,e,t){return Math.min(Math.max(n,e),t)}
